{"uid":"582f483ef7c40fa5","name":"test_network_cut_without_ip_change","fullName":"tests.integration.ha_tests.test_self_healing#test_network_cut_without_ip_change","historyId":"c42817a2584f9afe9bfa320de7305305","time":{"start":1708656282934,"stop":1708657042675,"duration":759741},"description":"Completely cut and restore network (situation when the unit IP doesn't change).","descriptionHtml":"<p>Completely cut and restore network (situation when the unit IP doesn't change).</p>\n","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql/1 [idle] waiting: awaiting for member to start\n  postgresql/2 [idle] active: \n  postgresql/3 [idle] active: Primary","statusTrace":"Traceback (most recent call last):\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 493, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 115, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 152, in _multicall\n    return outcome.get_result()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 114, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 493, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 115, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 152, in _multicall\n    return outcome.get_result()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 114, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/tests/integration/ha_tests/test_self_healing.py\", line 536, in test_network_cut_without_ip_change\n    await ops_test.model.wait_for_idle(apps=[app], status=\"active\")\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2945, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql/1 [idle] waiting: awaiting for member to start\n  postgresql/2 [idle] active: \n  postgresql/3 [idle] active: Primary","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop","time":{"start":1708651663304,"stop":1708651663304,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1708651663305,"stop":1708651663611,"duration":306},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1708651663305,"stop":1708651663305,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"primary_start_timeout","time":{"start":1708653954578,"stop":1708653958879,"duration":4301},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1708656282933,"stop":1708656282933,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1708656282933,"stop":1708656282933,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Completely cut and restore network (situation when the unit IP doesn't change).","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql/1 [idle] waiting: awaiting for member to start\n  postgresql/2 [idle] active: \n  postgresql/3 [idle] active: Primary","statusTrace":"Traceback (most recent call last):\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 493, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 115, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 152, in _multicall\n    return outcome.get_result()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 114, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 493, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 115, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 152, in _multicall\n    return outcome.get_result()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 114, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/tests/integration/ha_tests/test_self_healing.py\", line 536, in test_network_cut_without_ip_change\n    await ops_test.model.wait_for_idle(apps=[app], status=\"active\")\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2945, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql/1 [idle] waiting: awaiting for member to start\n  postgresql/2 [idle] active: \n  postgresql/3 [idle] active: Primary","steps":[],"attachments":[{"uid":"a9b6abe2eed1faae","name":"log","source":"a9b6abe2eed1faae.txt","type":"text/plain","size":13849}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"continuous_writes::finalizer","time":{"start":1708657042685,"stop":1708657048821,"duration":6136},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1708657048825,"stop":1708657048825,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"primary_start_timeout::finalizer","time":{"start":1708657048826,"stop":1708657061262,"duration":12436},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1708657061267,"stop":1708657062742,"duration":1475},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1708657062757,"stop":1708657062757,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1708657062757,"stop":1708657062757,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1708657062757,"stop":1708657062758,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.ha_tests"},{"name":"suite","value":"test_self_healing"},{"name":"host","value":"large-308-259a7ad9704f62fc11855e2d"},{"name":"thread","value":"13999-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.ha_tests.test_self_healing"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":2,"broken":9,"skipped":0,"passed":12,"unknown":0,"total":23},"items":[{"uid":"189a3ded2d9777f2","reportUrl":"../2032//#testresult/189a3ded2d9777f2","status":"passed","time":{"start":1708483008712,"stop":1708483222129,"duration":213417}},{"uid":"2e047bf5493e0705","reportUrl":"../2027//#testresult/2e047bf5493e0705","status":"passed","time":{"start":1708397302265,"stop":1708397552772,"duration":250507}},{"uid":"d0b5e3ca2fe117ca","reportUrl":"../2025//#testresult/d0b5e3ca2fe117ca","status":"passed","time":{"start":1708311381702,"stop":1708311626524,"duration":244822}},{"uid":"4f692ba45da834e4","reportUrl":"../2019//#testresult/4f692ba45da834e4","status":"passed","time":{"start":1708137198782,"stop":1708137427131,"duration":228349}},{"uid":"ca0fc0440fb9a732","reportUrl":"../2013//#testresult/ca0fc0440fb9a732","status":"passed","time":{"start":1708051745372,"stop":1708051968971,"duration":223599}},{"uid":"c6d608033140bcab","reportUrl":"../2008//#testresult/c6d608033140bcab","status":"broken","statusDetails":"tenacity.RetryError: RetryError[<Future at 0x7f4c31115c00 state=finished raised AssertionError>]","time":{"start":1707965697386,"stop":1707966140579,"duration":443193}},{"uid":"e3d0482403d52c8f","reportUrl":"../2000//#testresult/e3d0482403d52c8f","status":"passed","time":{"start":1707791361623,"stop":1707791573719,"duration":212096}},{"uid":"5eaaed0be0779982","reportUrl":"../1996//#testresult/5eaaed0be0779982","status":"passed","time":{"start":1707706399126,"stop":1707706649242,"duration":250116}},{"uid":"32f6287576c4de11","reportUrl":"../1995//#testresult/32f6287576c4de11","status":"broken","statusDetails":"tenacity.RetryError: RetryError[<Future at 0x7fadf9513280 state=finished raised AssertionError>]","time":{"start":1707619096343,"stop":1707619681665,"duration":585322}},{"uid":"a3a22b472baa3713","reportUrl":"../1990//#testresult/a3a22b472baa3713","status":"broken","statusDetails":"requests.exceptions.ConnectionError: HTTPConnectionPool(host='10.17.57.115', port=8008): Max retries exceeded with url: /cluster (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f0782895cf0>: Failed to establish a new connection: [Errno 113] No route to host'))","time":{"start":1707445759042,"stop":1707446295456,"duration":536414}},{"uid":"d0d2e41b7e58d946","reportUrl":"../1988//#testresult/d0d2e41b7e58d946","status":"broken","statusDetails":"tenacity.RetryError: RetryError[<Future at 0x7fe509d2a7d0 state=finished raised AssertionError>]","time":{"start":1707361573209,"stop":1707361755576,"duration":182367}},{"uid":"4d5babba0f5fa701","reportUrl":"../1973//#testresult/4d5babba0f5fa701","status":"passed","time":{"start":1707272808910,"stop":1707272930563,"duration":121653}},{"uid":"c0d02bdcd22ae49b","reportUrl":"../1961//#testresult/c0d02bdcd22ae49b","status":"broken","statusDetails":"tenacity.RetryError: RetryError[<Future at 0x7f1087984670 state=finished raised RetryError>]","time":{"start":1707185679734,"stop":1707188659760,"duration":2980026}},{"uid":"be12ba85ad071b1b","reportUrl":"../1957//#testresult/be12ba85ad071b1b","status":"broken","statusDetails":"tenacity.RetryError: RetryError[<Future at 0x7f493c06e3e0 state=finished raised AssertionError>]","time":{"start":1707099962754,"stop":1707100506395,"duration":543641}},{"uid":"81d6edc6051d7ab4","reportUrl":"../1956//#testresult/81d6edc6051d7ab4","status":"failed","statusDetails":"AssertionError: Unable to create continuous_writes table","time":{"start":1707013593708,"stop":1707013897213,"duration":303505}},{"uid":"31e87595b4ea21c7","reportUrl":"../1955//#testresult/31e87595b4ea21c7","status":"passed","time":{"start":1706928097116,"stop":1706928265961,"duration":168845}},{"uid":"2e33508a1400be5f","reportUrl":"../1939//#testresult/2e33508a1400be5f","status":"broken","statusDetails":"requests.exceptions.ConnectionError: HTTPConnectionPool(host='10.176.153.120', port=8008): Max retries exceeded with url: /cluster (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f45d1c05180>: Failed to establish a new connection: [Errno 111] Connection refused'))","time":{"start":1706754611736,"stop":1706755019668,"duration":407932}},{"uid":"9199e4e1631b2db7","reportUrl":"../1935//#testresult/9199e4e1631b2db7","status":"failed","statusDetails":"AssertionError: Unable to create continuous_writes table","time":{"start":1706674274559,"stop":1706674577753,"duration":303194}},{"uid":"25f4f62c7fd541d0","reportUrl":"../1928//#testresult/25f4f62c7fd541d0","status":"passed","time":{"start":1706581727511,"stop":1706581932184,"duration":204673}},{"uid":"f92f3e1fd529f034","reportUrl":"../1919//#testresult/f92f3e1fd529f034","status":"passed","time":{"start":1706495156152,"stop":1706495414841,"duration":258689}}]},"tags":["asyncio","group(1)"]},"source":"582f483ef7c40fa5.json","parameterValues":[]}