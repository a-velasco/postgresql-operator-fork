{"uid":"1b43e3c46de24036","name":"test_restart_db_process[/snap/charmed-postgresql/[0-9]*/usr/bin/patroni]","fullName":"tests.integration.ha_tests.test_self_healing#test_restart_db_process","historyId":"5275b7647c50948f92e67ea83d5d7646","time":{"start":1721873053762,"stop":1721873086930,"duration":33168},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1721871590830,"stop":1721871590831,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1721871590831,"stop":1721871590981,"duration":150},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1721871590831,"stop":1721871590831,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"primary_start_timeout","time":{"start":1721872726439,"stop":1721872728510,"duration":2071},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1721873053761,"stop":1721873053761,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1721873053761,"stop":1721873053761,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"passed","steps":[],"attachments":[{"uid":"ddbd998064c9ff9c","name":"log","source":"ddbd998064c9ff9c.txt","type":"text/plain","size":509}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"continuous_writes::finalizer","time":{"start":1721873086930,"stop":1721873087949,"duration":1019},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1721873087950,"stop":1721873087950,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"primary_start_timeout::finalizer","time":{"start":1721874619265,"stop":1721874753029,"duration":133764},"status":"broken","statusMessage":"tenacity.RetryError: RetryError[<Future at 0x7f30f7454b50 state=finished raised ConnectTimeout>]\n","statusTrace":"  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/allure_commons/_allure.py\", line 221, in __call__\n    return self._fixture_function(*args, **kwargs)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 300, in finalizer\n    event_loop.run_until_complete(async_finalizer())\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 292, in async_finalizer\n    await gen_obj.__anext__()\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/tests/integration/ha_tests/conftest.py\", line 58, in primary_start_timeout\n    await change_patroni_setting(\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/tests/integration/ha_tests/helpers.py\", line 151, in change_patroni_setting\n    for attempt in Retrying(stop=stop_after_delay(30 * 2), wait=wait_fixed(3)):\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 443, in __iter__\n    do = self.iter(retry_state=retry_state)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 376, in iter\n    result = action(retry_state)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 419, in exc_check\n    raise retry_exc from fut.exception()\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1721874753030,"stop":1721874753348,"duration":318},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1721874753349,"stop":1721874753350,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1721874753350,"stop":1721874753350,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1721874753350,"stop":1721874753350,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.ha_tests"},{"name":"suite","value":"test_self_healing"},{"name":"host","value":"fv-az885-848"},{"name":"thread","value":"7656-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.ha_tests.test_self_healing"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"process","value":"'/snap/charmed-postgresql/[0-9]*/usr/bin/patroni'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"62a429273e906a8a","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":3,"broken":0,"skipped":0,"passed":149,"unknown":1,"total":153},"items":[{"uid":"6752c43004563963","reportUrl":"../2979//#testresult/6752c43004563963","status":"passed","time":{"start":1721786852113,"stop":1721786880583,"duration":28470}},{"uid":"5ab17dac447d2106","reportUrl":"../2975//#testresult/5ab17dac447d2106","status":"passed","time":{"start":1721701300162,"stop":1721701334750,"duration":34588}},{"uid":"40da59bff6a2ca5c","reportUrl":"../2969//#testresult/40da59bff6a2ca5c","status":"passed","time":{"start":1721613652991,"stop":1721613698357,"duration":45366}},{"uid":"7450201d343dced1","reportUrl":"../2968//#testresult/7450201d343dced1","status":"passed","time":{"start":1721527368104,"stop":1721527417761,"duration":49657}},{"uid":"5fa702566e1b2ef1","reportUrl":"../2967//#testresult/5fa702566e1b2ef1","status":"passed","time":{"start":1721440919252,"stop":1721440953746,"duration":34494}},{"uid":"1d54ea75a87bf3aa","reportUrl":"../2957//#testresult/1d54ea75a87bf3aa","status":"passed","time":{"start":1721357532647,"stop":1721357580803,"duration":48156}},{"uid":"8ac398d16536b87f","reportUrl":"../2951//#testresult/8ac398d16536b87f","status":"passed","time":{"start":1721268005104,"stop":1721268037057,"duration":31953}},{"uid":"d27afa7b7c30d681","reportUrl":"../2947//#testresult/d27afa7b7c30d681","status":"passed","time":{"start":1721181885843,"stop":1721181937676,"duration":51833}},{"uid":"6964cd599009e5c9","reportUrl":"../2944//#testresult/6964cd599009e5c9","status":"passed","time":{"start":1721095347611,"stop":1721095373731,"duration":26120}},{"uid":"9ab504f28b38db6a","reportUrl":"../2936//#testresult/9ab504f28b38db6a","status":"passed","time":{"start":1721009412354,"stop":1721009444140,"duration":31786}},{"uid":"e84be7086d2f2be7","reportUrl":"../2935//#testresult/e84be7086d2f2be7","status":"passed","time":{"start":1720922451893,"stop":1720922481412,"duration":29519}},{"uid":"9d53fee702b7cc14","reportUrl":"../2934//#testresult/9d53fee702b7cc14","status":"passed","time":{"start":1720836492930,"stop":1720836524102,"duration":31172}},{"uid":"c4bf91045425605d","reportUrl":"../2932//#testresult/c4bf91045425605d","status":"passed","time":{"start":1720750399923,"stop":1720750428367,"duration":28444}},{"uid":"bbf5f8f397ada5e6","reportUrl":"../2925//#testresult/bbf5f8f397ada5e6","status":"passed","time":{"start":1720663904635,"stop":1720663937343,"duration":32708}},{"uid":"bb4ab61c5d7f2d4f","reportUrl":"../2918//#testresult/bb4ab61c5d7f2d4f","status":"passed","time":{"start":1720576806560,"stop":1720576837132,"duration":30572}},{"uid":"d0cef97ca8543f1d","reportUrl":"../2915//#testresult/d0cef97ca8543f1d","status":"unknown","time":{}},{"uid":"54609090fa4440be","reportUrl":"../2897//#testresult/54609090fa4440be","status":"passed","time":{"start":1720403994383,"stop":1720404029167,"duration":34784}},{"uid":"c9355c81b469250a","reportUrl":"../2896//#testresult/c9355c81b469250a","status":"passed","time":{"start":1720318384630,"stop":1720318411963,"duration":27333}},{"uid":"1a2f51f6d0c44ecc","reportUrl":"../2895//#testresult/1a2f51f6d0c44ecc","status":"passed","time":{"start":1720231831466,"stop":1720231863253,"duration":31787}},{"uid":"c22f0c19b1f3cb2b","reportUrl":"../2884//#testresult/c22f0c19b1f3cb2b","status":"passed","time":{"start":1720145164457,"stop":1720145215678,"duration":51221}}]},"tags":["asyncio","abort_on_fail","group(1)"]},"source":"1b43e3c46de24036.json","parameterValues":["'/snap/charmed-postgresql/[0-9]*/usr/bin/patroni'"]}