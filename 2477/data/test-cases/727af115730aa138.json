{"uid":"727af115730aa138","name":"test_forceful_restart_without_data_and_transaction_logs","fullName":"tests.integration.ha_tests.test_self_healing#test_forceful_restart_without_data_and_transaction_logs","historyId":"1ab295315f12ae381caee21d2bb9082a","time":{"start":1713664754684,"stop":1713664901525,"duration":146841},"description":"A forceful restart with deleted data and without transaction logs (forced clone).","descriptionHtml":"<p>A forceful restart with deleted data and without transaction logs (forced clone).</p>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":true,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"tmp_path_factory","time":{"start":1713662915566,"stop":1713662915566,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop","time":{"start":1713662915566,"stop":1713662915566,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1713662915567,"stop":1713662915702,"duration":135},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"primary_start_timeout","time":{"start":1713664061996,"stop":1713664064072,"duration":2076},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wal_settings","time":{"start":1713664751565,"stop":1713664754684,"duration":3119},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1713664751565,"stop":1713664751565,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1713664751565,"stop":1713664751565,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"A forceful restart with deleted data and without transaction logs (forced clone).","status":"passed","steps":[],"attachments":[{"uid":"b70e086a8a36694a","name":"log","source":"b70e086a8a36694a.txt","type":"text/plain","size":509}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"wal_settings::finalizer","time":{"start":1713664901526,"stop":1713664907981,"duration":6455},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes::finalizer","time":{"start":1713664907982,"stop":1713664909017,"duration":1035},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1713664909017,"stop":1713664909017,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"primary_start_timeout::finalizer","time":{"start":1713665962907,"stop":1713666097028,"duration":134121},"status":"broken","statusMessage":"tenacity.RetryError: RetryError[<Future at 0x7fe15cdd96f0 state=finished raised ConnectTimeout>]\n","statusTrace":"  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/allure_commons/_allure.py\", line 221, in __call__\n    return self._fixture_function(*args, **kwargs)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 302, in finalizer\n    event_loop.run_until_complete(async_finalizer())\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 294, in async_finalizer\n    await gen_obj.__anext__()\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/tests/integration/ha_tests/conftest.py\", line 58, in primary_start_timeout\n    await change_patroni_setting(\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/tests/integration/ha_tests/helpers.py\", line 130, in change_patroni_setting\n    for attempt in Retrying(stop=stop_after_delay(30 * 2), wait=wait_fixed(3)):\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 347, in __iter__\n    do = self.iter(retry_state=retry_state)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 326, in iter\n    raise retry_exc from fut.exception()\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1713666097029,"stop":1713666097301,"duration":272},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1713666097302,"stop":1713666097302,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1713666097302,"stop":1713666097302,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1713666097302,"stop":1713666097303,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"unstable"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.ha_tests"},{"name":"suite","value":"test_self_healing"},{"name":"host","value":"fv-az975-714"},{"name":"thread","value":"8354-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.ha_tests.test_self_healing"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":3,"broken":34,"skipped":0,"passed":29,"unknown":0,"total":66},"items":[{"uid":"ad5fbb320fc81ec1","reportUrl":"../2474//#testresult/ad5fbb320fc81ec1","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1713578431457,"stop":1713578511634,"duration":80177}},{"uid":"32b563c51ef68f59","reportUrl":"../2473//#testresult/32b563c51ef68f59","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1713494638607,"stop":1713494716317,"duration":77710}},{"uid":"4410c736b7d0d4d6","reportUrl":"../2466//#testresult/4410c736b7d0d4d6","status":"passed","time":{"start":1713405684110,"stop":1713405811938,"duration":127828}},{"uid":"afff02a016c99e01","reportUrl":"../2461//#testresult/afff02a016c99e01","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1713321305010,"stop":1713321383178,"duration":78168}},{"uid":"be048568ee220ae2","reportUrl":"../2452//#testresult/be048568ee220ae2","status":"passed","time":{"start":1713232875312,"stop":1713233025022,"duration":149710}},{"uid":"53f1c57258f97490","reportUrl":"../2447//#testresult/53f1c57258f97490","status":"failed","statusDetails":"AssertionError: Unable to create continuous_writes table","time":{"start":1713061555670,"stop":1713061860629,"duration":304959}},{"uid":"77ebcee3371d6456","reportUrl":"../2430//#testresult/77ebcee3371d6456","status":"passed","time":{"start":1712888170251,"stop":1712888271435,"duration":101184}},{"uid":"108f0d6f9b49a168","reportUrl":"../2424//#testresult/108f0d6f9b49a168","status":"passed","time":{"start":1712802183425,"stop":1712802326026,"duration":142601}},{"uid":"4a4422b4735c9884","reportUrl":"../2419//#testresult/4a4422b4735c9884","status":"failed","statusDetails":"AssertionError: Unable to create continuous_writes table","time":{"start":1712715159791,"stop":1712715464594,"duration":304803}},{"uid":"35dee7ecf02f8a14","reportUrl":"../2416//#testresult/35dee7ecf02f8a14","status":"passed","time":{"start":1712628186875,"stop":1712628355382,"duration":168507}},{"uid":"cd6f36b2dd456690","reportUrl":"../2409//#testresult/cd6f36b2dd456690","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1712541531181,"stop":1712541606846,"duration":75665}},{"uid":"47bab4f75707bc92","reportUrl":"../2408//#testresult/47bab4f75707bc92","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1712455673757,"stop":1712455754198,"duration":80441}},{"uid":"a859009bd1b87b6c","reportUrl":"../2407//#testresult/a859009bd1b87b6c","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1712370599268,"stop":1712370676651,"duration":77383}},{"uid":"549c6ae4e1a51293","reportUrl":"../2362//#testresult/549c6ae4e1a51293","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1712282492566,"stop":1712282573234,"duration":80668}},{"uid":"716014761590d2f7","reportUrl":"../2343//#testresult/716014761590d2f7","status":"passed","time":{"start":1712196004045,"stop":1712196144115,"duration":140070}},{"uid":"bd430d760601b09b","reportUrl":"../2330//#testresult/bd430d760601b09b","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1712109819700,"stop":1712109898433,"duration":78733}},{"uid":"fe58a59d17746fb5","reportUrl":"../2327//#testresult/fe58a59d17746fb5","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1712023318349,"stop":1712023397156,"duration":78807}},{"uid":"73549f0f52d622d","reportUrl":"../2324//#testresult/73549f0f52d622d","status":"passed","time":{"start":1711937225980,"stop":1711937388001,"duration":162021}},{"uid":"f2414d7341a158b9","reportUrl":"../2323//#testresult/f2414d7341a158b9","status":"passed","time":{"start":1711850498946,"stop":1711850661009,"duration":162063}},{"uid":"3316ce209ce18c15","reportUrl":"../2322//#testresult/3316ce209ce18c15","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1711765644894,"stop":1711765664226,"duration":19332}}]},"tags":["unstable","asyncio","group(1)"]},"source":"727af115730aa138.json","parameterValues":[]}