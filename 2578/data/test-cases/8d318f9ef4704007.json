{"uid":"8d318f9ef4704007","name":"test_full_cluster_restart[SIGTERM-postgres]","fullName":"tests.integration.ha_tests.test_self_healing#test_full_cluster_restart","historyId":"1fae0f26d7819f653f6b98b8e1174bd5","time":{"start":1714701642181,"stop":1714701707165,"duration":64984},"description":"This tests checks that a cluster recovers from a full cluster restart.\n\n    The test can be called a full cluster crash when the signal sent to the OS process\n    is SIGKILL.\n    ","descriptionHtml":"<p>This tests checks that a cluster recovers from a full cluster restart.</p>\n<pre><code>The test can be called a full cluster crash when the signal sent to the OS process\nis SIGKILL.\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: Not all units down at the same time.\nassert False","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 241, in <lambda>\n    lambda: runtest_hook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/threadexception.py\", line 87, in pytest_runtest_call\n    yield from thread_exception_runtest_hook()\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/threadexception.py\", line 63, in thread_exception_runtest_hook\n    yield\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/unraisableexception.py\", line 90, in pytest_runtest_call\n    yield from unraisable_exception_runtest_hook()\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/unraisableexception.py\", line 65, in unraisable_exception_runtest_hook\n    yield\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/logging.py\", line 850, in pytest_runtest_call\n    yield from self._runtest_for(item, \"call\")\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/logging.py\", line 833, in _runtest_for\n    yield\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/capture.py\", line 878, in pytest_runtest_call\n    return (yield)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/skipping.py\", line 257, in pytest_runtest_call\n    return (yield)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 183, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 173, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1627, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 162, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/tests/integration/ha_tests/test_self_healing.py\", line 274, in test_full_cluster_restart\n    assert await are_all_db_processes_down(\nAssertionError: Not all units down at the same time.\nassert False","flaky":true,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"tmp_path_factory","time":{"start":1714699810606,"stop":1714699810606,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop","time":{"start":1714699810606,"stop":1714699810606,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1714699810607,"stop":1714699810758,"duration":151},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1714701632847,"stop":1714701632847,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_restart_condition","time":{"start":1714701632847,"stop":1714701641143,"duration":8296},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1714701632847,"stop":1714701632847,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"loop_wait","time":{"start":1714701641143,"stop":1714701642181,"duration":1038},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[{"name":"loop_wait::finalizer","time":{"start":1714701707209,"stop":1714701707231,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_restart_condition::finalizer","time":{"start":1714701707232,"stop":1714702015880,"duration":308648},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes::finalizer","time":{"start":1714702015881,"stop":1714702021924,"duration":6043},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1714702021925,"stop":1714702021925,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1714704550449,"stop":1714704551010,"duration":561},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1714704551011,"stop":1714704551011,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1714704551011,"stop":1714704551011,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1714704551011,"stop":1714704551011,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.ha_tests"},{"name":"suite","value":"test_self_healing"},{"name":"host","value":"fv-az802-581"},{"name":"thread","value":"7214-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.ha_tests.test_self_healing"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"process","value":"'postgres'"},{"name":"signal","value":"'SIGTERM'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":29,"broken":0,"skipped":0,"passed":47,"unknown":0,"total":76},"items":[{"uid":"f3b6a1fd80367bd7","reportUrl":"../2570//#testresult/f3b6a1fd80367bd7","status":"passed","time":{"start":1714615285532,"stop":1714615321778,"duration":36246}},{"uid":"f3cde9ea70af06b3","reportUrl":"../2566//#testresult/f3cde9ea70af06b3","status":"passed","time":{"start":1714529228610,"stop":1714529254280,"duration":25670}},{"uid":"6eff0fe5ff1334ee","reportUrl":"../2557//#testresult/6eff0fe5ff1334ee","status":"passed","time":{"start":1714442154811,"stop":1714442176690,"duration":21879}},{"uid":"62a2869099f38e35","reportUrl":"../2540//#testresult/62a2869099f38e35","status":"passed","time":{"start":1714355776714,"stop":1714355803064,"duration":26350}},{"uid":"f8f760fd09ee44f1","reportUrl":"../2536//#testresult/f8f760fd09ee44f1","status":"failed","statusDetails":"AssertionError: Not all units down at the same time.\nassert False","time":{"start":1714183158616,"stop":1714183226897,"duration":68281}},{"uid":"d55812fd290f2531","reportUrl":"../2532//#testresult/d55812fd290f2531","status":"passed","time":{"start":1714097685735,"stop":1714097714954,"duration":29219}},{"uid":"d0357d9479d8cb5c","reportUrl":"../2517//#testresult/d0357d9479d8cb5c","status":"failed","statusDetails":"AssertionError: Not all units down at the same time.\nassert False","time":{"start":1713923791731,"stop":1713923858689,"duration":66958}},{"uid":"9655e7924ab7c3ac","reportUrl":"../2503//#testresult/9655e7924ab7c3ac","status":"passed","time":{"start":1713837616779,"stop":1713837657622,"duration":40843}},{"uid":"bca4f48f1b427dbb","reportUrl":"../2478//#testresult/bca4f48f1b427dbb","status":"passed","time":{"start":1713750913724,"stop":1713750937870,"duration":24146}},{"uid":"3ad7c9754e1b08e8","reportUrl":"../2477//#testresult/3ad7c9754e1b08e8","status":"failed","statusDetails":"AssertionError: Not all units down at the same time.\nassert False","time":{"start":1713664485097,"stop":1713664552044,"duration":66947}},{"uid":"42d417491cdbbc08","reportUrl":"../2474//#testresult/42d417491cdbbc08","status":"passed","time":{"start":1713578205157,"stop":1713578243747,"duration":38590}},{"uid":"65bbc5c2d46f7ae0","reportUrl":"../2473//#testresult/65bbc5c2d46f7ae0","status":"failed","statusDetails":"AssertionError: Not all units down at the same time.\nassert False","time":{"start":1713492323598,"stop":1713492390320,"duration":66722}},{"uid":"9d55faf5f1b3e62f","reportUrl":"../2466//#testresult/9d55faf5f1b3e62f","status":"failed","statusDetails":"AssertionError: Not all units down at the same time.\nassert False","time":{"start":1713405442720,"stop":1713405509810,"duration":67090}},{"uid":"a8fb9da8ff6d717","reportUrl":"../2461//#testresult/a8fb9da8ff6d717","status":"failed","statusDetails":"AssertionError: Not all units down at the same time.\nassert False","time":{"start":1713318975268,"stop":1713319042914,"duration":67646}},{"uid":"46fa54983b2b7bb3","reportUrl":"../2452//#testresult/46fa54983b2b7bb3","status":"passed","time":{"start":1713232637479,"stop":1713232658814,"duration":21335}},{"uid":"792788c0a3f5153","reportUrl":"../2447//#testresult/792788c0a3f5153","status":"failed","statusDetails":"AssertionError: Not all units down at the same time.\nassert False","time":{"start":1713059960921,"stop":1713060027984,"duration":67063}},{"uid":"f96e3c818ef1ec7c","reportUrl":"../2430//#testresult/f96e3c818ef1ec7c","status":"failed","statusDetails":"AssertionError: Not all units down at the same time.\nassert False","time":{"start":1712887108960,"stop":1712887175201,"duration":66241}},{"uid":"abb8e7abdb150131","reportUrl":"../2424//#testresult/abb8e7abdb150131","status":"failed","statusDetails":"AssertionError: Not all units down at the same time.\nassert False","time":{"start":1712800471099,"stop":1712800537400,"duration":66301}},{"uid":"4bdaa5e437df6e11","reportUrl":"../2419//#testresult/4bdaa5e437df6e11","status":"passed","time":{"start":1712714458066,"stop":1712714485546,"duration":27480}},{"uid":"12ebb111c23ab79a","reportUrl":"../2416//#testresult/12ebb111c23ab79a","status":"passed","time":{"start":1712627946146,"stop":1712627977750,"duration":31604}}]},"tags":["asyncio","group(1)"]},"source":"8d318f9ef4704007.json","parameterValues":["'postgres'","'SIGTERM'"]}