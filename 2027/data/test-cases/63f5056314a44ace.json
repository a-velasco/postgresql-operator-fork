{"uid":"63f5056314a44ace","name":"test_restart_db_process[postgres]","fullName":"tests.integration.ha_tests.test_self_healing#test_restart_db_process","historyId":"a9ad457c3a959b4124e0bcbca7775fea","time":{"start":1708395127473,"stop":1708395140533,"duration":13060},"status":"broken","statusMessage":"psycopg2.OperationalError: connection to server at \"10.149.82.190\", port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?","statusTrace":"Traceback (most recent call last):\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 493, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 115, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 152, in _multicall\n    return outcome.get_result()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 114, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 493, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 115, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 152, in _multicall\n    return outcome.get_result()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 114, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/tests/integration/ha_tests/test_self_healing.py\", line 227, in test_restart_db_process\n    await are_writes_increasing(ops_test, primary_name)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/tests/integration/ha_tests/helpers.py\", line 84, in are_writes_increasing\n    writes, _ = await count_writes(\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/tests/integration/ha_tests/helpers.py\", line 254, in count_writes\n    with psycopg2.connect(connection_string) as connection, connection.cursor() as cursor:\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: connection to server at \"10.149.82.190\", port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop","time":{"start":1708392497084,"stop":1708392497084,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1708392497084,"stop":1708392497084,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1708392497084,"stop":1708392497294,"duration":210},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"primary_start_timeout","time":{"start":1708394633186,"stop":1708394635428,"duration":2242},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1708395127472,"stop":1708395127472,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1708395127472,"stop":1708395127473,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[{"name":"continuous_writes::finalizer","time":{"start":1708395140553,"stop":1708395155794,"duration":15241},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1708395155797,"stop":1708395155797,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"primary_start_timeout::finalizer","time":{"start":1708397553823,"stop":1708397553975,"duration":152},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1708397553976,"stop":1708397555542,"duration":1566},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1708397555543,"stop":1708397555544,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1708397555544,"stop":1708397555556,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1708397555556,"stop":1708397555557,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.ha_tests"},{"name":"suite","value":"test_self_healing"},{"name":"host","value":"large-269-25f7aed8366da98f2ce20f53"},{"name":"thread","value":"14485-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.ha_tests.test_self_healing"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"process","value":"'postgres'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":1,"skipped":0,"passed":19,"unknown":0,"total":21},"items":[{"uid":"acc02269b41700da","reportUrl":"../2025//#testresult/acc02269b41700da","status":"failed","statusDetails":"AssertionError: assert 'postgresql/1' != 'postgresql/1'","time":{"start":1708309277006,"stop":1708309341689,"duration":64683}},{"uid":"15c225847e5c0ab4","reportUrl":"../2019//#testresult/15c225847e5c0ab4","status":"passed","time":{"start":1708136039851,"stop":1708136116862,"duration":77011}},{"uid":"fe0742b5a27ef11d","reportUrl":"../2013//#testresult/fe0742b5a27ef11d","status":"passed","time":{"start":1708049737153,"stop":1708049842624,"duration":105471}},{"uid":"469c056b6e805b31","reportUrl":"../2008//#testresult/469c056b6e805b31","status":"passed","time":{"start":1707963562573,"stop":1707963610743,"duration":48170}},{"uid":"85f8f39dc0d3f3aa","reportUrl":"../2000//#testresult/85f8f39dc0d3f3aa","status":"passed","time":{"start":1707790003475,"stop":1707790130694,"duration":127219}},{"uid":"4abf5bd99d4befb8","reportUrl":"../1996//#testresult/4abf5bd99d4befb8","status":"passed","time":{"start":1707704229804,"stop":1707704286210,"duration":56406}},{"uid":"750ed686acf8178b","reportUrl":"../1995//#testresult/750ed686acf8178b","status":"passed","time":{"start":1707617554132,"stop":1707617620084,"duration":65952}},{"uid":"272545c8617afaa6","reportUrl":"../1990//#testresult/272545c8617afaa6","status":"passed","time":{"start":1707444999922,"stop":1707445115975,"duration":116053}},{"uid":"5d963a197467b088","reportUrl":"../1988//#testresult/5d963a197467b088","status":"passed","time":{"start":1707358161463,"stop":1707358296759,"duration":135296}},{"uid":"f721340b0102f40e","reportUrl":"../1973//#testresult/f721340b0102f40e","status":"passed","time":{"start":1707271534323,"stop":1707271562285,"duration":27962}},{"uid":"752e1b9a5b2204b7","reportUrl":"../1961//#testresult/752e1b9a5b2204b7","status":"passed","time":{"start":1707185012505,"stop":1707185065131,"duration":52626}},{"uid":"e3ccd9fd31891662","reportUrl":"../1957//#testresult/e3ccd9fd31891662","status":"passed","time":{"start":1707099270662,"stop":1707099360884,"duration":90222}},{"uid":"8392c7bba3571bec","reportUrl":"../1956//#testresult/8392c7bba3571bec","status":"passed","time":{"start":1707012145447,"stop":1707012211813,"duration":66366}},{"uid":"f6a0d9724a8e6915","reportUrl":"../1955//#testresult/f6a0d9724a8e6915","status":"passed","time":{"start":1706926195865,"stop":1706926312679,"duration":116814}},{"uid":"56993cdf399b772","reportUrl":"../1939//#testresult/56993cdf399b772","status":"passed","time":{"start":1706754050588,"stop":1706754103188,"duration":52600}},{"uid":"2980e800c4554de6","reportUrl":"../1935//#testresult/2980e800c4554de6","status":"passed","time":{"start":1706671422469,"stop":1706671471415,"duration":48946}},{"uid":"ac0c342ff9fc2894","reportUrl":"../1928//#testresult/ac0c342ff9fc2894","status":"passed","time":{"start":1706580461635,"stop":1706580511386,"duration":49751}},{"uid":"7c810eb20e0a1ac6","reportUrl":"../1919//#testresult/7c810eb20e0a1ac6","status":"passed","time":{"start":1706494325403,"stop":1706494359107,"duration":33704}},{"uid":"280660b1a89f6c8f","reportUrl":"../1917//#testresult/280660b1a89f6c8f","status":"passed","time":{"start":1706408219475,"stop":1706408278913,"duration":59438}},{"uid":"6ba2cfa47ea52ed3","reportUrl":"../1916//#testresult/6ba2cfa47ea52ed3","status":"passed","time":{"start":1706320660834,"stop":1706320724505,"duration":63671}}]},"tags":["asyncio","group(1)"]},"source":"63f5056314a44ace.json","parameterValues":["'postgres'"]}