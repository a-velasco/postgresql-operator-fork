{"uid":"cd9eb815c1779061","name":"test_relation_with_no_database_name","fullName":"tests.integration.new_relations.test_new_relations#test_relation_with_no_database_name","historyId":"c96ec17cadfd678222f2404aa4b806e6","time":{"start":1707963965990,"stop":1707964568369,"duration":602379},"description":"Test that a relation with no database name doesn't block the charm.","descriptionHtml":"<p>Test that a relation with no database name doesn't block the charm.</p>\n","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-test-app/0 [idle] active: received database credentials of the second database\n  postgresql-test-app/1 [idle] active: received database credentials of the second database\n  database/0 [executing] active: Primary\n  database/1 [executing] active: \n  database/2 [executing] maintenance: reinitialising replica\n  database/3 [executing] maintenance: reinitialising replica","statusTrace":"Traceback (most recent call last):\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 493, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 115, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 152, in _multicall\n    return outcome.get_result()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 114, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 493, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 115, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 152, in _multicall\n    return outcome.get_result()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 114, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/tests/integration/new_relations/test_new_relations.py\", line 422, in test_relation_with_no_database_name\n    await ops_test.model.wait_for_idle(apps=APP_NAMES, status=\"active\", raise_on_blocked=True)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2945, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-test-app/0 [idle] active: received database credentials of the second database\n  postgresql-test-app/1 [idle] active: received database credentials of the second database\n  database/0 [executing] active: Primary\n  database/1 [executing] active: \n  database/2 [executing] maintenance: reinitialising replica\n  database/3 [executing] maintenance: reinitialising replica","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"ops_test","time":{"start":1707960533940,"stop":1707960534194,"duration":254},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1707960533940,"stop":1707960533940,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop","time":{"start":1707960533940,"stop":1707960533940,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1707963965989,"stop":1707963965990,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test that a relation with no database name doesn't block the charm.","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-test-app/0 [idle] active: received database credentials of the second database\n  postgresql-test-app/1 [idle] active: received database credentials of the second database\n  database/0 [executing] active: Primary\n  database/1 [executing] active: \n  database/2 [executing] maintenance: reinitialising replica\n  database/3 [executing] maintenance: reinitialising replica","statusTrace":"Traceback (most recent call last):\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 493, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 115, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 152, in _multicall\n    return outcome.get_result()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 114, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 493, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 115, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 152, in _multicall\n    return outcome.get_result()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 114, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/tests/integration/new_relations/test_new_relations.py\", line 422, in test_relation_with_no_database_name\n    await ops_test.model.wait_for_idle(apps=APP_NAMES, status=\"active\", raise_on_blocked=True)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2945, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-test-app/0 [idle] active: received database credentials of the second database\n  postgresql-test-app/1 [idle] active: received database credentials of the second database\n  database/0 [executing] active: Primary\n  database/1 [executing] active: \n  database/2 [executing] maintenance: reinitialising replica\n  database/3 [executing] maintenance: reinitialising replica","steps":[],"attachments":[{"uid":"cfff6bc5acca31ae","name":"log","source":"cfff6bc5acca31ae.txt","type":"text/plain","size":7804}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1707964568372,"stop":1707964568372,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1707965458871,"stop":1707965468312,"duration":9441},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1707965468321,"stop":1707965468336,"duration":15},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1707965468338,"stop":1707965468338,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1707965468338,"stop":1707965468340,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.new_relations"},{"name":"suite","value":"test_new_relations"},{"name":"host","value":"large-257-1c72e9257b5a8c80f930508e"},{"name":"thread","value":"15117-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.new_relations.test_new_relations"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":6,"skipped":0,"passed":9,"unknown":0,"total":15},"items":[{"uid":"bfc7dd31b5ae6993","reportUrl":"../2007//#testresult/bfc7dd31b5ae6993","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndatabase/0 [idle] active: Primary\n  database/1 [idle] active: \n  database/2 [executing] maintenance: reinitialising replica\n  database/3 [executing] waiting: awaiting for member to start","time":{"start":1707877512355,"stop":1707878113383,"duration":601028}},{"uid":"2c0fe6cd77ede42f","reportUrl":"../2000//#testresult/2c0fe6cd77ede42f","status":"broken","statusDetails":"juju.errors.JujuUnitError: Units in blocked: database/2, database/3","time":{"start":1707793028827,"stop":1707793031904,"duration":3077}},{"uid":"72e67efebb137b0b","reportUrl":"../1996//#testresult/72e67efebb137b0b","status":"broken","statusDetails":"juju.errors.JujuUnitError: Units in blocked: database/2, database/3","time":{"start":1707707063751,"stop":1707707067078,"duration":3327}},{"uid":"709dd6b072e3b5d6","reportUrl":"../1995//#testresult/709dd6b072e3b5d6","status":"passed","time":{"start":1707618174170,"stop":1707618257641,"duration":83471}},{"uid":"c9b8fe67399208e7","reportUrl":"../1993//#testresult/c9b8fe67399208e7","status":"passed","time":{"start":1707531248108,"stop":1707531325158,"duration":77050}},{"uid":"3424dc9cd2cb1003","reportUrl":"../1990//#testresult/3424dc9cd2cb1003","status":"passed","time":{"start":1707444986034,"stop":1707445062234,"duration":76200}},{"uid":"9b6e15d3506a3988","reportUrl":"../1973//#testresult/9b6e15d3506a3988","status":"passed","time":{"start":1707271470395,"stop":1707271518686,"duration":48291}},{"uid":"6beda471e0881767","reportUrl":"../1961//#testresult/6beda471e0881767","status":"passed","time":{"start":1707186391138,"stop":1707186472892,"duration":81754}},{"uid":"7bcf14e52c532da3","reportUrl":"../1957//#testresult/7bcf14e52c532da3","status":"broken","statusDetails":"juju.errors.JujuUnitError: Units in blocked: database/2, database/3","time":{"start":1707102087743,"stop":1707102090188,"duration":2445}},{"uid":"dd6035d9c95b49f7","reportUrl":"../1935//#testresult/dd6035d9c95b49f7","status":"broken","statusDetails":"juju.errors.JujuUnitError: Units in blocked: database/2, database/3","time":{"start":1706675902766,"stop":1706675906054,"duration":3288}},{"uid":"601cedf5e2fb050d","reportUrl":"../1928//#testresult/601cedf5e2fb050d","status":"passed","time":{"start":1706581458730,"stop":1706581535047,"duration":76317}},{"uid":"dd4c612ab59e3828","reportUrl":"../1919//#testresult/dd4c612ab59e3828","status":"passed","time":{"start":1706494439052,"stop":1706494512939,"duration":73887}},{"uid":"e7b1597d8a122ad2","reportUrl":"../1917//#testresult/e7b1597d8a122ad2","status":"passed","time":{"start":1706408380337,"stop":1706408458805,"duration":78468}},{"uid":"897badaa04a3e91d","reportUrl":"../1916//#testresult/897badaa04a3e91d","status":"passed","time":{"start":1706321806452,"stop":1706321867623,"duration":61171}}]},"tags":["asyncio","group(1)"]},"source":"cd9eb815c1779061.json","parameterValues":[]}