{"uid":"65bbc5c2d46f7ae0","name":"test_full_cluster_restart[SIGTERM-postgres]","fullName":"tests.integration.ha_tests.test_self_healing#test_full_cluster_restart","historyId":"1fae0f26d7819f653f6b98b8e1174bd5","time":{"start":1713492323598,"stop":1713492390320,"duration":66722},"description":"This tests checks that a cluster recovers from a full cluster restart.\n\n    The test can be called a full cluster crash when the signal sent to the OS process\n    is SIGKILL.\n    ","descriptionHtml":"<p>This tests checks that a cluster recovers from a full cluster restart.</p>\n<pre><code>The test can be called a full cluster crash when the signal sent to the OS process\nis SIGKILL.\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: Not all units down at the same time.\nassert False","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 340, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 240, in <lambda>\n    lambda: runtest_hook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 501, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 119, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 181, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 99, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 166, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/threadexception.py\", line 87, in pytest_runtest_call\n    yield from thread_exception_runtest_hook()\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/threadexception.py\", line 63, in thread_exception_runtest_hook\n    yield\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 166, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/unraisableexception.py\", line 90, in pytest_runtest_call\n    yield from unraisable_exception_runtest_hook()\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/unraisableexception.py\", line 65, in unraisable_exception_runtest_hook\n    yield\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 166, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/logging.py\", line 849, in pytest_runtest_call\n    yield from self._runtest_for(item, \"call\")\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/logging.py\", line 832, in _runtest_for\n    yield\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 166, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/capture.py\", line 883, in pytest_runtest_call\n    return (yield)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 166, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/skipping.py\", line 256, in pytest_runtest_call\n    return (yield)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 102, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 182, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 172, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1772, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 501, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 119, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 181, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 99, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 102, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 195, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/tests/integration/ha_tests/test_self_healing.py\", line 274, in test_full_cluster_restart\n    assert await are_all_db_processes_down(\nAssertionError: Not all units down at the same time.\nassert False","flaky":true,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop","time":{"start":1713490634926,"stop":1713490634927,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1713490634927,"stop":1713490634927,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1713490634927,"stop":1713490635074,"duration":147},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_restart_condition","time":{"start":1713492314128,"stop":1713492322559,"duration":8431},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1713492314128,"stop":1713492314128,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1713492314128,"stop":1713492314128,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"loop_wait","time":{"start":1713492322559,"stop":1713492323598,"duration":1039},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[{"name":"loop_wait::finalizer","time":{"start":1713492390336,"stop":1713492390360,"duration":24},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_restart_condition::finalizer","time":{"start":1713492390361,"stop":1713492698214,"duration":307853},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes::finalizer","time":{"start":1713492698214,"stop":1713492704256,"duration":6042},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1713492704256,"stop":1713492704256,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1713495756757,"stop":1713495757032,"duration":275},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1713495757033,"stop":1713495757034,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1713495757034,"stop":1713495757034,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1713495757034,"stop":1713495757034,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.ha_tests"},{"name":"suite","value":"test_self_healing"},{"name":"host","value":"fv-az1567-911"},{"name":"thread","value":"8144-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.ha_tests.test_self_healing"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"process","value":"'postgres'"},{"name":"signal","value":"'SIGTERM'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":25,"broken":0,"skipped":0,"passed":39,"unknown":0,"total":64},"items":[{"uid":"9d55faf5f1b3e62f","reportUrl":"../2466//#testresult/9d55faf5f1b3e62f","status":"failed","statusDetails":"AssertionError: Not all units down at the same time.\nassert False","time":{"start":1713405442720,"stop":1713405509810,"duration":67090}},{"uid":"a8fb9da8ff6d717","reportUrl":"../2461//#testresult/a8fb9da8ff6d717","status":"failed","statusDetails":"AssertionError: Not all units down at the same time.\nassert False","time":{"start":1713318975268,"stop":1713319042914,"duration":67646}},{"uid":"46fa54983b2b7bb3","reportUrl":"../2452//#testresult/46fa54983b2b7bb3","status":"passed","time":{"start":1713232637479,"stop":1713232658814,"duration":21335}},{"uid":"792788c0a3f5153","reportUrl":"../2447//#testresult/792788c0a3f5153","status":"failed","statusDetails":"AssertionError: Not all units down at the same time.\nassert False","time":{"start":1713059960921,"stop":1713060027984,"duration":67063}},{"uid":"f96e3c818ef1ec7c","reportUrl":"../2430//#testresult/f96e3c818ef1ec7c","status":"failed","statusDetails":"AssertionError: Not all units down at the same time.\nassert False","time":{"start":1712887108960,"stop":1712887175201,"duration":66241}},{"uid":"abb8e7abdb150131","reportUrl":"../2424//#testresult/abb8e7abdb150131","status":"failed","statusDetails":"AssertionError: Not all units down at the same time.\nassert False","time":{"start":1712800471099,"stop":1712800537400,"duration":66301}},{"uid":"4bdaa5e437df6e11","reportUrl":"../2419//#testresult/4bdaa5e437df6e11","status":"passed","time":{"start":1712714458066,"stop":1712714485546,"duration":27480}},{"uid":"12ebb111c23ab79a","reportUrl":"../2416//#testresult/12ebb111c23ab79a","status":"passed","time":{"start":1712627946146,"stop":1712627977750,"duration":31604}},{"uid":"d8e8e8c04ea7b602","reportUrl":"../2409//#testresult/d8e8e8c04ea7b602","status":"passed","time":{"start":1712541281239,"stop":1712541314637,"duration":33398}},{"uid":"7166e5987a6743e9","reportUrl":"../2408//#testresult/7166e5987a6743e9","status":"passed","time":{"start":1712455426562,"stop":1712455459460,"duration":32898}},{"uid":"6c736976649742e8","reportUrl":"../2407//#testresult/6c736976649742e8","status":"failed","statusDetails":"AssertionError: Not all units down at the same time.\nassert False","time":{"start":1712368453129,"stop":1712368520012,"duration":66883}},{"uid":"f1c5cb6e58869fcc","reportUrl":"../2362//#testresult/f1c5cb6e58869fcc","status":"failed","statusDetails":"AssertionError: Not all units down at the same time.\nassert False","time":{"start":1712282168199,"stop":1712282233749,"duration":65550}},{"uid":"7648de8647869234","reportUrl":"../2343//#testresult/7648de8647869234","status":"failed","statusDetails":"AssertionError: Not all units down at the same time.\nassert False","time":{"start":1712195719749,"stop":1712195786540,"duration":66791}},{"uid":"ca6bf5aedb4ffb19","reportUrl":"../2330//#testresult/ca6bf5aedb4ffb19","status":"passed","time":{"start":1712109531671,"stop":1712109556956,"duration":25285}},{"uid":"78c4da6c7f283dfd","reportUrl":"../2327//#testresult/78c4da6c7f283dfd","status":"passed","time":{"start":1712023057309,"stop":1712023078780,"duration":21471}},{"uid":"a873ae16f3552b81","reportUrl":"../2324//#testresult/a873ae16f3552b81","status":"passed","time":{"start":1711936713094,"stop":1711936740093,"duration":26999}},{"uid":"5980a9e0a066bb56","reportUrl":"../2323//#testresult/5980a9e0a066bb56","status":"passed","time":{"start":1711850216854,"stop":1711850242764,"duration":25910}},{"uid":"e9b105c717f250fb","reportUrl":"../2322//#testresult/e9b105c717f250fb","status":"failed","statusDetails":"AssertionError: Not all units down at the same time.\nassert False","time":{"start":1711763578239,"stop":1711763645220,"duration":66981}},{"uid":"2e732c14252f1bd8","reportUrl":"../2318//#testresult/2e732c14252f1bd8","status":"passed","time":{"start":1711677403070,"stop":1711677425923,"duration":22853}},{"uid":"c2bd984e4d96ba4a","reportUrl":"../2315//#testresult/c2bd984e4d96ba4a","status":"failed","statusDetails":"AssertionError: Not all units down at the same time.\nassert False","time":{"start":1711591031722,"stop":1711591099926,"duration":68204}}]},"tags":["asyncio","group(1)"]},"source":"65bbc5c2d46f7ae0.json","parameterValues":["'postgres'","'SIGTERM'"]}