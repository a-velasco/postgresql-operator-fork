{"uid":"c643d70aede0ace1","name":"test_cluster_restore","fullName":"tests.integration.ha_tests.test_restore_cluster#test_cluster_restore","historyId":"bfd786bcea584ef3db80f0473c6efd1e","time":{"start":1708911983034,"stop":1708915482732,"duration":3499698},"description":"Recreates the cluster from storage volumes.","descriptionHtml":"<p>Recreates the cluster from storage volumes.</p>\n","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nsecond-cluster/1 [idle] active: Primary\n  second-cluster/2 [idle] active: \n  second-cluster/3 [executing] waiting: waiting for primary to be reachable from this unit","statusTrace":"Traceback (most recent call last):\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 493, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 115, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 152, in _multicall\n    return outcome.get_result()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 114, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 493, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 115, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 152, in _multicall\n    return outcome.get_result()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 114, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/tests/integration/ha_tests/test_restore_cluster.py\", line 100, in test_cluster_restore\n    unit = await add_unit_with_storage(ops_test, SECOND_APPLICATION, storage)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/tests/integration/ha_tests/helpers.py\", line 822, in add_unit_with_storage\n    await ops_test.model.wait_for_idle(apps=[app], status=\"active\", timeout=1500)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2945, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\nsecond-cluster/1 [idle] active: Primary\n  second-cluster/2 [idle] active: \n  second-cluster/3 [executing] waiting: waiting for primary to be reachable from this unit","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop","time":{"start":1708910950558,"stop":1708910950558,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1708910950558,"stop":1708910950559,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1708910950559,"stop":1708910950854,"duration":295},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1708911983033,"stop":1708911983033,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Recreates the cluster from storage volumes.","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nsecond-cluster/1 [idle] active: Primary\n  second-cluster/2 [idle] active: \n  second-cluster/3 [executing] waiting: waiting for primary to be reachable from this unit","statusTrace":"Traceback (most recent call last):\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 493, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 115, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 152, in _multicall\n    return outcome.get_result()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 114, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 493, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 115, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 152, in _multicall\n    return outcome.get_result()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 114, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/tests/integration/ha_tests/test_restore_cluster.py\", line 100, in test_cluster_restore\n    unit = await add_unit_with_storage(ops_test, SECOND_APPLICATION, storage)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/tests/integration/ha_tests/helpers.py\", line 822, in add_unit_with_storage\n    await ops_test.model.wait_for_idle(apps=[app], status=\"active\", timeout=1500)\n  File \"/home/ubuntu/github-runner/_work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2945, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\nsecond-cluster/1 [idle] active: Primary\n  second-cluster/2 [idle] active: \n  second-cluster/3 [executing] waiting: waiting for primary to be reachable from this unit","steps":[],"attachments":[{"uid":"3edba58031900c91","name":"log","source":"3edba58031900c91.txt","type":"text/plain","size":27104}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1708915482781,"stop":1708915482782,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1708915482785,"stop":1708915483823,"duration":1038},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1708915483825,"stop":1708915483827,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1708915483827,"stop":1708915483827,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1708915483828,"stop":1708915483829,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.ha_tests"},{"name":"suite","value":"test_restore_cluster"},{"name":"host","value":"large-265-5a16fbaa36bb3f2c72863390"},{"name":"thread","value":"36975-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.ha_tests.test_restore_cluster"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":9,"skipped":0,"passed":20,"unknown":0,"total":29},"items":[{"uid":"ce5fa1b64159d98e","reportUrl":"../2062//#testresult/ce5fa1b64159d98e","status":"passed","time":{"start":1708825656369,"stop":1708829002174,"duration":3345805}},{"uid":"b316b5335ffd1400","reportUrl":"../2061//#testresult/b316b5335ffd1400","status":"passed","time":{"start":1708739123578,"stop":1708742209911,"duration":3086333}},{"uid":"1b5ed38cb71059a3","reportUrl":"../2055//#testresult/1b5ed38cb71059a3","status":"passed","time":{"start":1708652837574,"stop":1708656156910,"duration":3319336}},{"uid":"d357a7824776263c","reportUrl":"../2040//#testresult/d357a7824776263c","status":"passed","time":{"start":1708566402434,"stop":1708569460745,"duration":3058311}},{"uid":"fc8233473e1df31","reportUrl":"../2032//#testresult/fc8233473e1df31","status":"passed","time":{"start":1708480342383,"stop":1708484580293,"duration":4237910}},{"uid":"a179d285f0e97d29","reportUrl":"../2027//#testresult/a179d285f0e97d29","status":"passed","time":{"start":1708393709718,"stop":1708397069395,"duration":3359677}},{"uid":"e27eb0d2ffbf29eb","reportUrl":"../2025//#testresult/e27eb0d2ffbf29eb","status":"passed","time":{"start":1708307350716,"stop":1708310545462,"duration":3194746}},{"uid":"b7fe6ba9aa61ce8b","reportUrl":"../2022//#testresult/b7fe6ba9aa61ce8b","status":"passed","time":{"start":1708220983386,"stop":1708224194531,"duration":3211145}},{"uid":"8281f87be75a98e6","reportUrl":"../2019//#testresult/8281f87be75a98e6","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nsecond-cluster/1 [idle] active: Primary\n  second-cluster/2 [idle] active: \n  second-cluster/3 [idle] waiting: awaiting for member to start","time":{"start":1708134262601,"stop":1708137947510,"duration":3684909}},{"uid":"14d46589f7c7995d","reportUrl":"../2013//#testresult/14d46589f7c7995d","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nsecond-cluster/1 [idle] active: Primary\n  second-cluster/2 [idle] active: \n  second-cluster/3 [idle] waiting: awaiting for member to start","time":{"start":1708047918285,"stop":1708051474873,"duration":3556588}},{"uid":"b24b41451ccf0397","reportUrl":"../2008//#testresult/b24b41451ccf0397","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nsecond-cluster/1 [idle] active: Primary\n  second-cluster/2 [idle] active: \n  second-cluster/3 [idle] waiting: awaiting for member to start","time":{"start":1707961605402,"stop":1707965045670,"duration":3440268}},{"uid":"922df5bab20c7502","reportUrl":"../2007//#testresult/922df5bab20c7502","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nsecond-cluster/1 [idle] active: Primary\n  second-cluster/2 [idle] waiting: awaiting for member to start","time":{"start":1707875054098,"stop":1707877227564,"duration":2173466}},{"uid":"1e0880f749610f87","reportUrl":"../2000//#testresult/1e0880f749610f87","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nsecond-cluster/1 [idle] active: Primary\n  second-cluster/2 [idle] active: \n  second-cluster/3 [executing] waiting: awaiting for member to start","time":{"start":1707788650875,"stop":1707792039088,"duration":3388213}},{"uid":"95db21952893f1c6","reportUrl":"../1996//#testresult/95db21952893f1c6","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nsecond-cluster/1 [idle] active: Primary\n  second-cluster/2 [idle] waiting: awaiting for member to start","time":{"start":1707702162260,"stop":1707704318968,"duration":2156708}},{"uid":"47e3275f69cc43ee","reportUrl":"../1995//#testresult/47e3275f69cc43ee","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nsecond-cluster/1 [idle] active: Primary\n  second-cluster/2 [idle] active: \n  second-cluster/3 [idle] waiting: awaiting for member to start","time":{"start":1707615907436,"stop":1707619336472,"duration":3429036}},{"uid":"cf3a4cced9732f17","reportUrl":"../1993//#testresult/cf3a4cced9732f17","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nsecond-cluster/1 [idle] active: Primary\n  second-cluster/2 [idle] active: \n  second-cluster/3 [idle] waiting: awaiting for member to start","time":{"start":1707529226171,"stop":1707532613472,"duration":3387301}},{"uid":"3d53cc2b9e49b122","reportUrl":"../1990//#testresult/3d53cc2b9e49b122","status":"passed","time":{"start":1707442936636,"stop":1707445820088,"duration":2883452}},{"uid":"66962191df50930c","reportUrl":"../1973//#testresult/66962191df50930c","status":"passed","time":{"start":1707270169230,"stop":1707273389321,"duration":3220091}},{"uid":"864d8b2a16785a3c","reportUrl":"../1961//#testresult/864d8b2a16785a3c","status":"passed","time":{"start":1707183629688,"stop":1707187075324,"duration":3445636}},{"uid":"440e2d4da8f737e4","reportUrl":"../1957//#testresult/440e2d4da8f737e4","status":"passed","time":{"start":1707097520732,"stop":1707100553317,"duration":3032585}}]},"tags":["asyncio","group(1)"]},"source":"c643d70aede0ace1.json","parameterValues":[]}