{"uid":"1c8d1fbb609cc504","name":"test_restart_db_process[/snap/charmed-postgresql/[0-9]*/usr/bin/patroni]","fullName":"tests.integration.ha_tests.test_self_healing#test_restart_db_process","historyId":"5275b7647c50948f92e67ea83d5d7646","time":{"start":1714788113478,"stop":1714788162422,"duration":48944},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop","time":{"start":1714786105678,"stop":1714786105678,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1714786105679,"stop":1714786105844,"duration":165},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1714786105679,"stop":1714786105679,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"primary_start_timeout","time":{"start":1714787661937,"stop":1714787664010,"duration":2073},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1714788113477,"stop":1714788113477,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1714788113478,"stop":1714788113478,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"passed","steps":[],"attachments":[{"uid":"ef0d0f955ff5588e","name":"log","source":"ef0d0f955ff5588e.txt","type":"text/plain","size":509}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"continuous_writes::finalizer","time":{"start":1714788162423,"stop":1714788163441,"duration":1018},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1714788163442,"stop":1714788163442,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"primary_start_timeout::finalizer","time":{"start":1714791651041,"stop":1714791785751,"duration":134710},"status":"broken","statusMessage":"tenacity.RetryError: RetryError[<Future at 0x7fbdcc5578e0 state=finished raised ConnectTimeout>]\n","statusTrace":"  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/allure_commons/_allure.py\", line 221, in __call__\n    return self._fixture_function(*args, **kwargs)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 300, in finalizer\n    event_loop.run_until_complete(async_finalizer())\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 292, in async_finalizer\n    await gen_obj.__anext__()\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/tests/integration/ha_tests/conftest.py\", line 58, in primary_start_timeout\n    await change_patroni_setting(\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/tests/integration/ha_tests/helpers.py\", line 148, in change_patroni_setting\n    for attempt in Retrying(stop=stop_after_delay(30 * 2), wait=wait_fixed(3)):\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 347, in __iter__\n    do = self.iter(retry_state=retry_state)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 326, in iter\n    raise retry_exc from fut.exception()\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1714791785752,"stop":1714791786130,"duration":378},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1714791786132,"stop":1714791786132,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1714791786132,"stop":1714791786132,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1714791786132,"stop":1714791786132,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.ha_tests"},{"name":"suite","value":"test_self_healing"},{"name":"host","value":"fv-az1144-117"},{"name":"thread","value":"7210-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.ha_tests.test_self_healing"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"process","value":"'/snap/charmed-postgresql/[0-9]*/usr/bin/patroni'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":1,"broken":0,"skipped":0,"passed":76,"unknown":0,"total":77},"items":[{"uid":"6f6a7c38ba042542","reportUrl":"../2578//#testresult/6f6a7c38ba042542","status":"passed","time":{"start":1714701603053,"stop":1714701631822,"duration":28769}},{"uid":"8f278bc82a2fa14b","reportUrl":"../2570//#testresult/8f278bc82a2fa14b","status":"passed","time":{"start":1714615243479,"stop":1714615275303,"duration":31824}},{"uid":"b4da78fd6c9c36e2","reportUrl":"../2566//#testresult/b4da78fd6c9c36e2","status":"passed","time":{"start":1714529187252,"stop":1714529218269,"duration":31017}},{"uid":"3f23403e2fd8dcff","reportUrl":"../2557//#testresult/3f23403e2fd8dcff","status":"passed","time":{"start":1714442117919,"stop":1714442144642,"duration":26723}},{"uid":"8997e65ccd7a555a","reportUrl":"../2540//#testresult/8997e65ccd7a555a","status":"passed","time":{"start":1714355738635,"stop":1714355766243,"duration":27608}},{"uid":"1754efa0b22cf15c","reportUrl":"../2536//#testresult/1754efa0b22cf15c","status":"passed","time":{"start":1714183125164,"stop":1714183148463,"duration":23299}},{"uid":"11011d7726f4b143","reportUrl":"../2532//#testresult/11011d7726f4b143","status":"passed","time":{"start":1714097652294,"stop":1714097675583,"duration":23289}},{"uid":"1e13028dfc7993ba","reportUrl":"../2517//#testresult/1e13028dfc7993ba","status":"passed","time":{"start":1713923750933,"stop":1713923781761,"duration":30828}},{"uid":"5fee53a24e696941","reportUrl":"../2503//#testresult/5fee53a24e696941","status":"passed","time":{"start":1713837575131,"stop":1713837606535,"duration":31404}},{"uid":"fb663128c38eea9c","reportUrl":"../2478//#testresult/fb663128c38eea9c","status":"passed","time":{"start":1713750872568,"stop":1713750903467,"duration":30899}},{"uid":"f4849685ba2cc591","reportUrl":"../2477//#testresult/f4849685ba2cc591","status":"passed","time":{"start":1713664442781,"stop":1713664475366,"duration":32585}},{"uid":"5cd51c416d7562df","reportUrl":"../2474//#testresult/5cd51c416d7562df","status":"passed","time":{"start":1713578164531,"stop":1713578195055,"duration":30524}},{"uid":"68c1d0be7767e846","reportUrl":"../2473//#testresult/68c1d0be7767e846","status":"passed","time":{"start":1713492285996,"stop":1713492313103,"duration":27107}},{"uid":"2c4b09a188328c6f","reportUrl":"../2466//#testresult/2c4b09a188328c6f","status":"passed","time":{"start":1713405394197,"stop":1713405432790,"duration":38593}},{"uid":"2a1c4eabfa609361","reportUrl":"../2461//#testresult/2a1c4eabfa609361","status":"passed","time":{"start":1713318924675,"stop":1713318964895,"duration":40220}},{"uid":"737514ea01d6c9a5","reportUrl":"../2452//#testresult/737514ea01d6c9a5","status":"passed","time":{"start":1713232595826,"stop":1713232627564,"duration":31738}},{"uid":"34078549cdcd157","reportUrl":"../2447//#testresult/34078549cdcd157","status":"passed","time":{"start":1713059917540,"stop":1713059949540,"duration":32000}},{"uid":"31417863a382a934","reportUrl":"../2430//#testresult/31417863a382a934","status":"passed","time":{"start":1712887052326,"stop":1712887098877,"duration":46551}},{"uid":"758ba9d23debaeac","reportUrl":"../2424//#testresult/758ba9d23debaeac","status":"passed","time":{"start":1712800417057,"stop":1712800460695,"duration":43638}},{"uid":"1a5f2675e6e1398e","reportUrl":"../2419//#testresult/1a5f2675e6e1398e","status":"passed","time":{"start":1712714368207,"stop":1712714447795,"duration":79588}}]},"tags":["asyncio","group(1)"]},"source":"1c8d1fbb609cc504.json","parameterValues":["'/snap/charmed-postgresql/[0-9]*/usr/bin/patroni'"]}