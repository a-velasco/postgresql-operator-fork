{"uid":"ba17c8d0fba69505","name":"test_forceful_restart_without_data_and_transaction_logs","fullName":"tests.integration.ha_tests.test_self_healing#test_forceful_restart_without_data_and_transaction_logs","historyId":"1ab295315f12ae381caee21d2bb9082a","time":{"start":1718158541131,"stop":1718158701785,"duration":160654},"description":"A forceful restart with deleted data and without transaction logs (forced clone).","descriptionHtml":"<p>A forceful restart with deleted data and without transaction logs (forced clone).</p>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":true,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1718156407980,"stop":1718156407981,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1718156407981,"stop":1718156408122,"duration":141},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1718156407981,"stop":1718156407981,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"primary_start_timeout","time":{"start":1718157752495,"stop":1718157754569,"duration":2074},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1718158538006,"stop":1718158538007,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1718158538006,"stop":1718158538006,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wal_settings","time":{"start":1718158538007,"stop":1718158541130,"duration":3123},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"A forceful restart with deleted data and without transaction logs (forced clone).","status":"passed","steps":[],"attachments":[{"uid":"c493a55a709b514","name":"log","source":"c493a55a709b514.txt","type":"text/plain","size":509}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"wal_settings::finalizer","time":{"start":1718158701785,"stop":1718158708299,"duration":6514},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes::finalizer","time":{"start":1718158708299,"stop":1718158709328,"duration":1029},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1718158709329,"stop":1718158709329,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"primary_start_timeout::finalizer","time":{"start":1718159763941,"stop":1718159897667,"duration":133726},"status":"broken","statusMessage":"tenacity.RetryError: RetryError[<Future at 0x7f0c754a37c0 state=finished raised ConnectTimeout>]\n","statusTrace":"  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/allure_commons/_allure.py\", line 221, in __call__\n    return self._fixture_function(*args, **kwargs)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 300, in finalizer\n    event_loop.run_until_complete(async_finalizer())\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 292, in async_finalizer\n    await gen_obj.__anext__()\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/tests/integration/ha_tests/conftest.py\", line 58, in primary_start_timeout\n    await change_patroni_setting(\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/tests/integration/ha_tests/helpers.py\", line 148, in change_patroni_setting\n    for attempt in Retrying(stop=stop_after_delay(30 * 2), wait=wait_fixed(3)):\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 347, in __iter__\n    do = self.iter(retry_state=retry_state)\n  File \"/home/runner/work/postgresql-operator/postgresql-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 326, in iter\n    raise retry_exc from fut.exception()\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1718159897668,"stop":1718159897961,"duration":293},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1718159897962,"stop":1718159897962,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1718159897963,"stop":1718159897963,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1718159897963,"stop":1718159897963,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"unstable"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.ha_tests"},{"name":"suite","value":"test_self_healing"},{"name":"host","value":"fv-az840-328"},{"name":"thread","value":"8984-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.ha_tests.test_self_healing"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"9d3db6b4a561d85f","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":7,"broken":62,"skipped":0,"passed":41,"unknown":0,"total":110},"items":[{"uid":"f1ffde6dbde7589a","reportUrl":"../2717//#testresult/f1ffde6dbde7589a","status":"broken","statusDetails":"tenacity.RetryError: RetryError[<Future at 0x7f0ece156f80 state=finished raised RetryError>]","time":{"start":1717813714083,"stop":1717813914310,"duration":200227}},{"uid":"518496eafb9d40d8","reportUrl":"../2712//#testresult/518496eafb9d40d8","status":"passed","time":{"start":1717727095467,"stop":1717727292522,"duration":197055}},{"uid":"5a2597d4760a8b91","reportUrl":"../2707//#testresult/5a2597d4760a8b91","status":"passed","time":{"start":1717640106192,"stop":1717640304897,"duration":198705}},{"uid":"195626d9b0976927","reportUrl":"../2697//#testresult/195626d9b0976927","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1717553543422,"stop":1717553652767,"duration":109345}},{"uid":"ecd34c14670576de","reportUrl":"../2687//#testresult/ecd34c14670576de","status":"passed","time":{"start":1717468085098,"stop":1717468245673,"duration":160575}},{"uid":"310ca05154f7d010","reportUrl":"../2679//#testresult/310ca05154f7d010","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1717294436138,"stop":1717294545531,"duration":109393}},{"uid":"7c685ce8d47ff9c7","reportUrl":"../2678//#testresult/7c685ce8d47ff9c7","status":"broken","statusDetails":"tenacity.RetryError: RetryError[<Future at 0x7f3eb88f1b10 state=finished raised RetryError>]","time":{"start":1717209512964,"stop":1717209512964,"duration":0}},{"uid":"db7ff40072d48491","reportUrl":"../2673//#testresult/db7ff40072d48491","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1717121444536,"stop":1717121550156,"duration":105620}},{"uid":"738bcb1706f6834","reportUrl":"../2656//#testresult/738bcb1706f6834","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1716863120484,"stop":1716863227641,"duration":107157}},{"uid":"64f1bc8460c1b592","reportUrl":"../2646//#testresult/64f1bc8460c1b592","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1716775681769,"stop":1716775791328,"duration":109559}},{"uid":"ade83a447a2b78f9","reportUrl":"../2645//#testresult/ade83a447a2b78f9","status":"broken","statusDetails":"tenacity.RetryError: RetryError[<Future at 0x7fbb5a9d32b0 state=finished raised RetryError>]","time":{"start":1716690440800,"stop":1716690440800,"duration":0}},{"uid":"baf814e8f2c90e84","reportUrl":"../2644//#testresult/baf814e8f2c90e84","status":"broken","statusDetails":"tenacity.RetryError: RetryError[<Future at 0x7f23080a5e40 state=finished raised RetryError>]","time":{"start":1716604973110,"stop":1716604973110,"duration":0}},{"uid":"b894454e25669290","reportUrl":"../2641//#testresult/b894454e25669290","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1716516175489,"stop":1716516283977,"duration":108488}},{"uid":"cc508ffdbb71a5c9","reportUrl":"../2639//#testresult/cc508ffdbb71a5c9","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1716429866750,"stop":1716429973243,"duration":106493}},{"uid":"67ece260db9790b6","reportUrl":"../2637//#testresult/67ece260db9790b6","status":"failed","statusDetails":"AssertionError: Unable to create continuous_writes table","time":{"start":1716345232238,"stop":1716345537169,"duration":304931}},{"uid":"fd4819ea3eecf308","reportUrl":"../2636//#testresult/fd4819ea3eecf308","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1716260077677,"stop":1716260186811,"duration":109134}},{"uid":"edd94337dfefa9","reportUrl":"../2629//#testresult/edd94337dfefa9","status":"failed","statusDetails":"AssertionError: Unable to create continuous_writes table","time":{"start":1716171486757,"stop":1716171791215,"duration":304458}},{"uid":"c87d5b5ecdbf60de","reportUrl":"../2628//#testresult/c87d5b5ecdbf60de","status":"passed","time":{"start":1716085054353,"stop":1716085252660,"duration":198307}},{"uid":"4b3ffa5620a94c96","reportUrl":"../2627//#testresult/4b3ffa5620a94c96","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1715997720626,"stop":1715997831366,"duration":110740}},{"uid":"746380739c9f79e9","reportUrl":"../2625//#testresult/746380739c9f79e9","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1715912497757,"stop":1715912606044,"duration":108287}}]},"tags":["unstable","asyncio","group(1)"]},"source":"ba17c8d0fba69505.json","parameterValues":[]}