{"uid":"a13887d5fc49d0cb","name":"test_async_replication_failover_in_main_cluster","fullName":"tests.integration.ha_tests.test_async_replication#test_async_replication_failover_in_main_cluster","historyId":"0d36e96afab568171b86ef8e12ac0c4f","time":{"start":1719886607552,"stop":1719886704727,"duration":97175},"description":"Test that async replication fails over correctly.","descriptionHtml":"<p>Test that async replication fails over correctly.</p>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":true,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1719884003704,"stop":1719884003704,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1719884003704,"stop":1719884003704,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1719884003705,"stop":1719884003837,"duration":132},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"first_model","time":{"start":1719884003837,"stop":1719884003837,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"second_model","time":{"start":1719884003838,"stop":1719884004448,"duration":610},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1719886607552,"stop":1719886607552,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1719886607552,"stop":1719886607552,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test that async replication fails over correctly.","status":"passed","steps":[],"attachments":[{"uid":"7c3619359ecf7dd2","name":"log","source":"7c3619359ecf7dd2.txt","type":"text/plain","size":1523}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"continuous_writes::finalizer","time":{"start":1719886704727,"stop":1719886705755,"duration":1028},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1719886705756,"stop":1719886705756,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"second_model::finalizer","time":{"start":1719888000606,"stop":1719888000629,"duration":23},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1719888000630,"stop":1719888002580,"duration":1950},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1719888002581,"stop":1719888002595,"duration":14},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1719888002595,"stop":1719888002595,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1719888002596,"stop":1719888002644,"duration":48},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"@pytest.mark.skipif(False, reason='Requires juju 3')"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.ha_tests"},{"name":"suite","value":"test_async_replication"},{"name":"host","value":"fv-az915-673"},{"name":"thread","value":"7117-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.ha_tests.test_async_replication"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"f3d6e708807e9487","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":2,"broken":11,"skipped":18,"passed":25,"unknown":1,"total":57},"items":[{"uid":"c5bf6644c4c4762c","reportUrl":"../2855//#testresult/c5bf6644c4c4762c","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql/0 [executing] waiting: awaiting for member to start","time":{"start":1719800298144,"stop":1719802306738,"duration":2008594}},{"uid":"60a4785a69546a19","reportUrl":"../2852//#testresult/60a4785a69546a19","status":"unknown","time":{}},{"uid":"d36206e96b04de5b","reportUrl":"../2850//#testresult/d36206e96b04de5b","status":"failed","statusDetails":"AssertionError: Sync-standby is the same as before\nassert 'postgresql-1' != 'postgresql-1'","time":{"start":1719627613366,"stop":1719627663245,"duration":49879}},{"uid":"e1fbf7b4a2cecace","reportUrl":"../2848//#testresult/e1fbf7b4a2cecace","status":"passed","time":{"start":1719541144289,"stop":1719541232024,"duration":87735}},{"uid":"9ddf423b65adfbee","reportUrl":"../2844//#testresult/9ddf423b65adfbee","status":"passed","time":{"start":1719454738122,"stop":1719454844758,"duration":106636}},{"uid":"edf8b0198b85ceb7","reportUrl":"../2827//#testresult/edf8b0198b85ceb7","status":"passed","time":{"start":1719368160175,"stop":1719368247667,"duration":87492}},{"uid":"eb40e0c19d307d45","reportUrl":"../2813//#testresult/eb40e0c19d307d45","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: postgresql/1","time":{"start":1719282112795,"stop":1719282148159,"duration":35364}},{"uid":"64317bed210d9b94","reportUrl":"../2796//#testresult/64317bed210d9b94","status":"failed","statusDetails":"AssertionError: Sync-standby is the same as before\nassert 'postgresql-1' != 'postgresql-1'","time":{"start":1719195813094,"stop":1719195855627,"duration":42533}},{"uid":"a20783f055a31094","reportUrl":"../2795//#testresult/a20783f055a31094","status":"passed","time":{"start":1719109413640,"stop":1719109505189,"duration":91549}},{"uid":"4370f39774ecc030","reportUrl":"../2794//#testresult/4370f39774ecc030","status":"skipped","statusDetails":"XFAIL reason: aborted\n\n_pytest.outcomes.XFailed: aborted","time":{"start":1719024497195,"stop":1719024497195,"duration":0}},{"uid":"e0f8dcb914b96fea","reportUrl":"../2791//#testresult/e0f8dcb914b96fea","status":"skipped","statusDetails":"XFAIL reason: aborted\n\n_pytest.outcomes.XFailed: aborted","time":{"start":1718938028165,"stop":1718938028165,"duration":0}},{"uid":"56ac4c8fab0acc8a","reportUrl":"../2782//#testresult/56ac4c8fab0acc8a","status":"passed","time":{"start":1718850271463,"stop":1718850355563,"duration":84100}},{"uid":"ac29ef2309b717d1","reportUrl":"../2776//#testresult/ac29ef2309b717d1","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: postgresql/0","time":{"start":1718763682781,"stop":1718763722412,"duration":39631}},{"uid":"1f0368af964913ce","reportUrl":"../2762//#testresult/1f0368af964913ce","status":"passed","time":{"start":1718677325638,"stop":1718677411033,"duration":85395}},{"uid":"231bf98f70a795eb","reportUrl":"../2752//#testresult/231bf98f70a795eb","status":"skipped","statusDetails":"XFAIL reason: aborted\n\n_pytest.outcomes.XFailed: aborted","time":{"start":1718591814284,"stop":1718591814284,"duration":0}},{"uid":"cf6eba00262c2e67","reportUrl":"../2751//#testresult/cf6eba00262c2e67","status":"passed","time":{"start":1718504637900,"stop":1718504725068,"duration":87168}},{"uid":"ac8e2396ca57606e","reportUrl":"../2748//#testresult/ac8e2396ca57606e","status":"skipped","statusDetails":"XFAIL reason: aborted\n\n_pytest.outcomes.XFailed: aborted","time":{"start":1718418504690,"stop":1718418504690,"duration":0}},{"uid":"a1ef6a462f6c6237","reportUrl":"../2744//#testresult/a1ef6a462f6c6237","status":"passed","time":{"start":1718332472831,"stop":1718332559974,"duration":87143}},{"uid":"72e91cba5e92f2cb","reportUrl":"../2730//#testresult/72e91cba5e92f2cb","status":"passed","time":{"start":1718246503198,"stop":1718246574994,"duration":71796}},{"uid":"1d57ec9dc5ea03d3","reportUrl":"../2724//#testresult/1d57ec9dc5ea03d3","status":"passed","time":{"start":1718160369900,"stop":1718160448264,"duration":78364}}]},"tags":["asyncio","abort_on_fail","@pytest.mark.skipif(False, reason='Requires juju 3')","group(1)"]},"source":"a13887d5fc49d0cb.json","parameterValues":[]}